<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gambling Simulator - Admin Dashboard</title>
    <link rel="stylesheet" href="css/admin.css">
    <!-- Chart.js library for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dark-mode">
    <div class="admin-container">
        <header>
            <h1>Gambling Simulator Admin Dashboard</h1>
            <div class="theme-toggle">
                <span>Dark Mode</span>
                <label class="switch">
                    <input type="checkbox" id="theme-toggle" checked>
                    <span class="slider round"></span>
                </label>
            </div>
        </header>

        <div class="admin-login" id="admin-login">
            <h2>Admin Login</h2>
            <div class="login-form">
                <input type="password" id="admin-password" placeholder="Enter admin password">
                <button id="login-button">Login</button>
                <p id="login-error" class="error-message"></p>
            </div>
        </div>

        <div class="admin-dashboard" id="admin-dashboard" style="display: none;">
            <div class="data-controls">
                <div class="session-selector">
                    <label for="session-select">Select Session:</label>
                    <select id="session-select"></select>
                </div>
                <div class="session-actions">
                    <button id="new-session-button">Create New Instance</button>
                    <button id="stop-session-button" class="action-button">Stop Instance</button>
                    <button id="terminate-session-button" class="action-button danger">Terminate Instance</button>
                </div>
                <div class="reset-controls">
                    <button id="reset-all-data-button">Reset All Data</button>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="stats-panel">
                    <h2>Session Statistics</h2>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <h3>Total Players</h3>
                            <div class="stat-value" id="total-players">0</div>
                        </div>
                        <div class="stat-item">
                            <h3>Average Spins</h3>
                            <div class="stat-value" id="avg-spins">0</div>
                        </div>
                        <div class="stat-item">
                            <h3>Average Coins Left</h3>
                            <div class="stat-value" id="avg-coins">0</div>
                        </div>
                        <div class="stat-item">
                            <h3>Win Rate</h3>
                            <div class="stat-value" id="win-rate">0%</div>
                        </div>
                        <div class="stat-item">
                            <h3>Avg Play Time</h3>
                            <div class="stat-value" id="avg-time">0s</div>
                        </div>
                        <div class="stat-item">
                            <h3>Near Misses</h3>
                            <div class="stat-value" id="near-misses">0</div>
                        </div>
                    </div>
                </div>

                <div class="chart-panel">
                    <h2>Player Coin Balance Over Time</h2>
                    <canvas id="balance-chart"></canvas>
                </div>

                <div class="chart-panel">
                    <h2>Average Coin Balance</h2>
                    <canvas id="avg-balance-chart"></canvas>
                </div>

                <div class="chart-panel">
                    <h2>Time Until Players Can't Gamble</h2>
                    <canvas id="time-chart"></canvas>
                </div>

                <div class="players-panel">
                    <h2>Active Players</h2>
                    <div class="player-list" id="player-list">
                        <!-- Players will be listed here dynamically -->
                    </div>
                </div>
            </div>

            <div class="session-url-panel">
                <h3>Share This Instance</h3>
                <div class="url-container">
                    <input type="text" id="session-url" readonly>
                    <button id="copy-url-button">Copy URL</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal for Session Actions -->
    <div class="modal" id="confirm-modal">
        <div class="modal-content">
            <h3 id="confirm-title">Confirm Action</h3>
            <p id="confirm-message">Are you sure you want to perform this action?</p>
            <div class="modal-buttons">
                <button id="confirm-yes">Yes</button>
                <button id="confirm-no">No</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal for Delete Session -->
    <div class="modal" id="delete-confirm-modal">
        <div class="modal-content">
            <h3>Confirm Delete</h3>
            <p>Are you sure you want to delete this session? This action cannot be undone.</p>
            <div class="modal-buttons">
                <button id="delete-confirm-yes">Yes, Delete</button>
                <button id="delete-confirm-no">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal for Reset All Data -->
    <div class="modal" id="reset-all-confirm-modal">
        <div class="modal-content">
            <h3>Reset All Data</h3>
            <p>WARNING: This will delete ALL saved data and reset the application to a clean state. This action cannot be undone.</p>
            <div class="modal-buttons">
                <button id="reset-all-confirm-yes">Yes, Reset Everything</button>
                <button id="reset-all-confirm-no">Cancel</button>
            </div>
        </div>
    </div>

    <script src="js/session.js"></script>
    <script src="js/admin.js"></script>
</body>
</html> 